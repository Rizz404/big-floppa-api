Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"default",{enumerable:true,get:function(){return _default}});const _http=_interop_require_default(require("http"));const _express=_interop_require_default(require("express"));const _bodyparser=_interop_require_default(require("body-parser"));const _cors=_interop_require_default(require("cors"));const _cookieparser=_interop_require_default(require("cookie-parser"));const _helmet=_interop_require_default(require("helmet"));const _morgan=_interop_require_default(require("morgan"));const _expresssession=_interop_require_default(require("express-session"));const _passport=_interop_require_default(require("passport"));require("dotenv/config");require("reflect-metadata");const _datasource=_interop_require_default(require("./config/data-source"));const _userroute=require("./routes/user.route");const _catroute=require("./routes/cat.route");const _catBreedroute=require("./routes/catBreed.route");const _jwtstrategy=_interop_require_default(require("./strategies/jwt.strategy"));const _authroute=require("./routes/auth.route");const _localstrategy=_interop_require_default(require("./strategies/local.strategy"));const _googleoauth2strategy=_interop_require_default(require("./strategies/google.oauth2.strategy"));const _allowedOrigins=_interop_require_default(require("./config/allowedOrigins"));const _socketio=require("socket.io");function _interop_require_default(obj){return obj&&obj.__esModule?obj:{default:obj}}const app=(0,_express.default)();const PORT=process.env.PORT||5e3;const server=_http.default.createServer(app);app.use(_bodyparser.default.json({limit:"30mb"}));app.use(_bodyparser.default.urlencoded({limit:"30mb",extended:true}));app.use((0,_cors.default)({origin:_allowedOrigins.default,credentials:true,optionsSuccessStatus:200}));app.use((0,_cookieparser.default)());app.use((0,_expresssession.default)({secret:process.env.SESSION_SECRET||"secret",saveUninitialized:true,resave:false,cookie:{maxAge:6e4*60}}));app.use((0,_helmet.default)());app.use(_helmet.default.crossOriginResourcePolicy({policy:"cross-origin"}));app.use((0,_morgan.default)("dev"));app.use(_passport.default.initialize());app.use(_passport.default.session());(0,_jwtstrategy.default)(_passport.default);(0,_googleoauth2strategy.default)(_passport.default);(0,_localstrategy.default)(_passport.default);app.use("/auth",_authroute.authRouter);app.use("/users",_userroute.userRouter);app.use("/cats",_catroute.catRouter);app.use("/cat-breeds",_catBreedroute.catBreedRouter);const io=new _socketio.Server(server,{cors:{origin:_allowedOrigins.default,credentials:true,optionsSuccessStatus:200}});_datasource.default.initialize().then(async()=>{server.listen(PORT,()=>{console.log(`Server running on port ${PORT}`)});console.log("Data Source has been initialized!")}).catch(err=>{console.error("Error during Data Source initialization:",err);process.exit(1)});const _default=app;
//# sourceMappingURL=index.js.map